<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
<html>
 <head>
  <meta http-equiv="Content-type" content="text/html;charset=UTF-8">
  <title>
   Valores aceptados como par&aacute;metros adicionales para las firmas PAdES
  </title>
 </head>
 <body>
 <p>Valores aceptados como par&aacute;metros adicionales para las firmas PAdES:</p>
 <dl>
  <dt><b><i>allowCosigningUnregisteredSignatures</i></b></dt>
  <dd>
   Si se establece a <code>true</code> se permite firmar un PDF incluso si este contiene firmas previas no
   registradas dentro de campos Acrobat (<i>AcroFields</i>), condici&oacute;n obligatoria sin la cual es muy
   probable que se corrompan las firmas previas.<br>
   Si no se establece o se establece a o <code>false</code>, al intentar firmar un PDF que contenga firmas
   no registradas se lanza una excepci&oacute;n de tipo <code>PdfHasUnregisteredSignaturesException</code>.
  </dd>
  <dt><b><i>includeOnlySignningCertificate</i></b> (propiedad compartida con XAdES y CAdES)</dt>
   <dd>
	Si se establece a <code>true</code> se incluye en la firma &uacute;nicamente el certificado del firmante (y no la cadena de certificaci&oacute;n completa).
	Si no se establece o se establece a o <code>false</code> se incluir&aacute; toda la cadena de certificaci&oacute;n.
   </dd>
  <dt><b><i>alwaysCreateRevision</i></b></dt>
   <dd>
    Si se establece a <code>true</code> siempre crea una revisi&oacute;n del PDF incluso cuando el documento no contiene 
    ninguna firma previa.<br>
    Esto requiere que los documentos de entrada cumplan estrictamente la especificaci&oacute;n PDF 1.7 (ISO 32000-1:2008),
    y puede crear incompatibilidades con documentos PDF acordes a la especificaci&oacute;n 1.3 creados con bibliotecas
    antiguas, como por ejemplo <a href="http://qpdf.sourceforge.net/">QPDF</a>.<br>
    Si se establece a <code>false</code>, no crea revisiones en documentos que no contengan firmas previas y s&iacute; las 
    crea en documentos que ya contengan alguna firma. 
   </dd>
  <dt><b><i>image</i></b></dt>
   <dd>
    Imagen que se desea insertar en el PDF antes de que este sea firmado. La imagen debe proporcionarse en formato JPEG codificado en Base64.<br>
    SI el documento ya contiene firmas es posible que se invaliden, por lo que conviene usarlo &uacute;nicamente en documentos sin firmas previas.
   </dd>
  <dt><b><i>imagePage</i></b></dt>
   <dd>
    P&aacute;gina donde desea insertarse la imagen indicada mediante el par&aacute;metro <code>image</code>. La numeraci&oacute;n de las p&aacute;ginas
    comienza en uno.<br>
    Si se indica -1 como n&uacute;mero de p&aacute;gina se inserta la imagen en la &uacute;ltima p&aacute;gina del documento.
    Si se indica 0 como n&uacute;mero de p&aacute;gina se inserta la imagen en todas las p&aacute;ginas del documento.
    Este par&aacute;metro es obligatorio, si no se indica una p&aacute;gina v&aacute;lida no se insertar&aacute; la imagen.
   </dd> 
  <dt><b><i>imagePositionOnPageLowerLeftX</i></b></dt>
   <dd>
    Coordenada horizontal inferior izquierda de la posici&oacute;n de la imagen (indicada mediante el par&aacute;metro <code>image</code>) dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas de la imagen mediante los par&aacute;metros <code>imagePositionOnPageLowerLeftY</code>,
    <code>imagePositionOnPageUpperRightX</code> e <code>imagePositionOnPageUpperRightY</code>.<br>
    Es necesario indicar tambi&eacute;n una p&aacute;gina de inserci&oacute;n en el par&aacute;metro <code>imagePage</code>.
   </dd>
  <dt><b><i>imagePositionOnPageLowerLeftY</i></b></dt>
   <dd>
    Coordenada vertical inferior izquierda de la posici&oacute;n de la imagen (indicada mediante el par&aacute;metro <code>image</code>) dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas de la imagen mediante los par&aacute;metros <code>imagePositionOnPageLowerLeftX</code>,
    <code>imagePositionOnPageUpperRightX</code> e <code>imagePositionOnPageUpperRightY</code>.<br>
    Es necesario indicar tambi&eacute;n una p&aacute;gina de inserci&oacute;n en el par&aacute;metro <code>imagePage</code>.
   </dd>
  <dt><b><i>imagePositionOnPageUpperRightX</i></b></dt>
   <dd>
    Coordenada horizontal superior derecha de la posici&oacute;n de la imagen (indicada mediante el par&aacute;metro <code>image</code>) dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas de la imagen mediante los par&aacute;metros <code>imagePositionOnPageLowerLeftX</code>,
    <code>imagePositionOnPageLowerLeftY</code> e <code>imagePositionOnPageUpperRightY</code>.<br>
    Es necesario indicar tambi&eacute;n una p&aacute;gina de inserci&oacute;n en el par&aacute;metro <code>imagePage</code>.
   </dd>
  <dt><b><i>imagePositionOnPageUpperRightY</i></b></dt>
   <dd>
    Coordenada vertical superior derecha de la posici&oacute;n de la imagen (indicada mediante el par&aacute;metro <code>image</code>) dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas de la imagen mediante los par&aacute;metros <code>imagePositionOnPageLowerLeftX</code>,
    <code>imagePositionOnPageLowerLeftY</code> e <code>imagePositionOnPageUpperRightX</code>.<br>
    Es necesario indicar tambi&eacute;n una p&aacute;gina de inserci&oacute;n en el par&aacute;metro <code>imagePage</code>.
   </dd>
   <dt><b><i>attach</i></b></dt>
   <dd>
    Contenido a a&ntilde;adir como adjunto al PDF, en formato Base64 (el adjunto ser&aacute; el binario decodificado).
    Este par&aacute;metro requiere que se haya establecido tambi&eacute;n el par&aacute;metro <code>attachFileName</code>.
   </dd>
  <dt><b><i>attachFileName</i></b></dt>
   <dd>
    Nombre de fichero para adjuntar el contenido binario indicado mediante <code>attach</code>.
    Este par&aacute;metro requiere que se haya establecido tambi&eacute;n el par&aacute;metro <code>attach</code>.
   </dd>
  <dt><b><i>attachDescription</i></b></dt>
   <dd>
    Descripci&oacute;n del contenido binario indicado mediante <code>attach</code>.
   </dd>
  <dt><b><i>certificationLevel</i></b></dt>
   <dd>
    Nivel de certificaci&oacute;n de la firma PDF.<br>Los valores admitidos son num&eacute;ricos, correspondiendo:
    <ul>
     <li><i>0</i> = Firma ordinaria no certificada (por defecto)</li>
     <li><i>1</i> = Firma de autor. No se permite ning&uacute;n cambio posterior en el documento</li>
     <li><i>2</i> = Firma de autor certificada para formularios. Se permite &uacute;nicamente el relleno posterior de los campos del formulario</li>
     <li><i>3</i> = Firma certificada. Se permite &uacute;nicamente el relleno posterior de los campos del formulario o el a&ntilde;adido de firmas de aprobaci&oacute;n</li>
    </ul>
   </dd>
  <dt><b><i>signatureSubFilter</i></b></dt>
   <dd>
    Nombre del sub-filtro en el diccionario PDF para indicar el tipo de la firma. Si no se indica este par&aacute;metro por defecto se
    usa <code>adbe.pkcs7.detached</code> (firma PAdES b&aacute;sica).
    Es posible indicar <code>ETSI.CAdES.detached</code> para generar una firma PAdES-BES, si bien el hacerlo puede causar que al a&ntilde;adir firmas adicionales
    al PDF se invaliden las ya existentes.
   </dd>
  <dt><b><i>signatureField</i></b></dt>
   <dd>
    Nombre del campo en donde insertar la firma.
    Si el documento PDF tiene ya un campo de firma pre-creado es posible utilizarlo para insertar la firma generada, referenci&aacute;ndolo
    por su nombre.<br>
    Si se indica un nombre de campo de firma que no exista en el documento PDF proporcionado, se generar&aacute; una excepci&oacute;n.
   </dd>
  <dt><b><i>signaturePage</i></b></dt>
   <dd>
    P&aacute;gina del documento PDF donde insertar la firma. Puede usarse la constante <code>LAST_PAGE</code>
    para referirse a la &uacute;ltima p&aacute;gina del documento PDF si se desconoce el n&uacute;mero total de
    p&aacute;ginas de este.<br>
    Este par&aacute;metro se ignora si se ha establecido valor al par&aacute;metro <code>signatureField</code>, y necesita que se
    establezcan valores v&aacute;lidos a los par&aacute;metros <code>signaturePositionOnPageLowerLeftX</code>, <code>signaturePositionOnPageLowerLeftY</code>,
    <code>signaturePositionOnPageUpperRightX</code> y <code>signaturePositionOnPageUpperRightY</code>.
   </dd>
  <dt><b><i>signaturePositionOnPageLowerLeftX</i></b></dt>
   <dd>
    Coordenada horizontal inferior izquierda de la posici&oacute;n del recuadro visible de la firma dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas del recuadro mediante los par&aacute;metros <code>signaturePositionOnPageLowerLeftY</code>,
    <code>signaturePositionOnPageUpperRightX</code> y <code>signaturePositionOnPageUpperRightY</code>.<br>
    Si no se indica una p&aacute;gina en el par&aacute;metro <code>signaturePage</code> la firma se inserta en la &uacute;ltima p&aacute;gina
    del documento.
   </dd>
  <dt><b><i>signaturePositionOnPageLowerLeftY</i></b></dt>
   <dd>
    Coordenada vertical inferior izquierda de la posici&oacute;n del recuadro visible de la firma dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas del recuadro mediante los par&aacute;metros <code>signaturePositionOnPageLowerLeftX</code>,
    <code>signaturePositionOnPageUpperRightX</code> y <code>signaturePositionOnPageUpperRightY</code>.<br>
    Si no se indica una p&aacute;gina en el par&aacute;metro <code>signaturePage</code> la firma se inserta en la &uacute;ltima p&aacute;gina
    del documento.
   </dd>
  <dt><b><i>signaturePositionOnPageUpperRightX</i></b></dt>
   <dd>
    Coordenada horizontal superior derecha de la posici&oacute;n del recuadro visible de la firma dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas del recuadro mediante los par&aacute;metros <code>signaturePositionOnPageLowerLeftX</code>,
    <code>signaturePositionOnPageLowerLeftY</code> y <code>signaturePositionOnPageUpperRightY</code>.<br>
    Si no se indica una p&aacute;gina en el par&aacute;metro <code>signaturePage</code> la firma se inserta en la &uacute;ltima p&aacute;gina
    del documento.
   </dd>
  <dt><b><i>signaturePositionOnPageUpperRightY</i></b></dt>
   <dd>
    Coordenada vertical superior derecha de la posici&oacute;n del recuadro visible de la firma dentro de la p&aacute;gina.<br>
    Es necesario indicar el resto de coordenadas del recuadro mediante los par&aacute;metros <code>signaturePositionOnPageLowerLeftX</code>,
    <code>signaturePositionOnPageLowerLeftY</code> y <code>signaturePositionOnPageUpperRightX</code>.<br>
    Si no se indica una p&aacute;gina en el par&aacute;metro <code>signaturePage</code> la firma se inserta en la &uacute;ltima p&aacute;gina
    del documento.
   </dd>
  <dt><b><i>signatureRubricImage</i></b></dt>
   <dd>Imagen JPEG codificada en Base64 de la r&uacute;brica de la firma manuscrita que se desea aparezca como firma visible en el PDF.</dd>
  <dt><b><i>layer2Text</i></b></dt>
   <dd>
    Texto a escribir dentro de la "capa 2" de la firma visible.<br>
    Este texto se escribe &uacute;nicamente si no se ha especificado una
    imagen de r&uacute;brica, y necesita que se indique la p&aacute;gina y la situaci&oacute;n d&oacute;nde mostrar el recuadro de firma
    mediante los par&aacute;metros <code>signaturePositionOnPageLowerLeftX</code>, <code>signaturePositionOnPageLowerLeftY</code>,
    <code>signaturePositionOnPageUpperRightX</code>, <code>signaturePositionOnPageUpperRightY</code> y <code>signaturePage</code>.
   </dd>
  <dt><b><i>layer2FontFamily</i></b></dt>
   <dd>
    Tipo de letra a usar en el texto de la "capa 2" de la firma visible. Este par&aacute;metro requiere que se haya establecido tambi&eacute;n
    el par&aacute;metro <code>layer2Text</code>.<br>Los valores admitidos son num&eacute;ricos, correspondiendo:
    <ul>
     <li><i>0</i> = Courier (tipo por defecto)</li>
     <li><i>1</i> = Helv&eacute;tica</li>
     <li><i>2</i> = Times Roman</li>
     <li><i>3</i> = Symbol</li>
     <li><i>4</i> = ZapfDingBats</li>
    </ul>
   </dd>
  <dt><b><i>layer2FontSize</i></b></dt>
   <dd>
    Tama&ntilde;o de letra a usar en el texto de la "capa 2" de la firma visible. Este par&aacute;metro requiere que se haya establecido
    tambi&eacute;n el par&aacute;metro <code>layer2Text</code>.<br>Los valores admitidos son num&eacute;ricos (y el valor por defecto es 12).
   </dd>
  <dt><b><i>layer2FontStyle</i></b></dt>
   <dd>
    Estilo del tipo de letra a usar en el texto de la "capa 2" de la firma visible. Este par&aacute;metro requiere que se haya establecido
    tambi&eacute;n el par&aacute;metro <code>layer2Text</code>.<br>Los valores admitidos son num&eacute;ricos, correspondiendo:
    <ul>
     <li><i>0</i> = Normal (estilo por defecto)</li>
     <li><i>1</i> = Negrita</li>
     <li><i>2</i> = Cursiva</li>
     <li><i>3</i> = Negrita y cursiva</li>
     <li><i>4</i> = Subrayado</li>
     <li><i>8</i> = Tachado</li>
    </ul>
    Es posible combinar estilos aplicando la operaci&oacute;n l&oacute;gica <cite>o</cite> sobre los valores num&eacute;ricos a combinar.
   </dd>
  <dt><b><i>layer2FontColor</i></b></dt>
   <dd>
    Color del texto de la "capa 2" de la firma visible. Este par&aacute;metro requiere que se haya establecido
    tambi&eacute;n el par&aacute;metro <code>layer2Text</code>.<br>Los valores admitidos son textuales (se ignora entre may&uacute;sculas
    y min&uacute;sculas), soport&aacute;ndose:
    <ul>
     <li><i>black</i> = Negro (color por defecto)</li>
     <li><i>white</i> = Blanco</li>
     <li><i>gray</i> = Gris</li>
     <li><i>lightGray</i> = Gris claro</li>
     <li><i>darkGray</i> = Gris oscuro</li>
     <li><i>red</i> = Rojo</li>
     <li><i>pink</i> = Rosa</li>
    </ul>
   </dd>
  <!-- 
  <dt><b><i>layer4Text</i></b></dt>
   <dd>
    Texto a escribir dentro de la "capa 4" de la firma visible. Este texto se escribe &uacute;nicamente si no se ha especificado una
    imagen de r&uacute;brica.
   </dd>
  -->
  <dt><b><i>signReason</i></b></dt>
   <dd>Raz&oacute;n por la que se realiza la firma (este dato se a&ntilde;ade al diccionario PDF, y no a la propia firma).</dd>
  <dt><b><i>signatureProductionCity</i></b> (propiedad compartida con XAdES y CAdES)</dt>
   <dd>Ciudad en la que se realiza la firma (este dato se a&ntilde;ade al diccionario PDF, y no a la propia firma).</dd>
  <dt><b><i>signerContact</i></b></dt>
   <dd>
    Contacto del firmante, usualmente una direcci&oacute;n de correo electr&oacute;nico
    (este dato se a&ntilde;ade al diccionario PDF, y no a la propia firma).
   </dd>
  <dt><b><i>policyIdentifier</i></b> (propiedad compartida con XAdES y CAdES)</dt>
   <dd>
    Identificador de la pol&iacute;tica de firma. Debe ser un OID (o una URN de tipo OID) que identifique
    un&iacute;vocamente la pol&iacute;tica en formato ASN.1 procesable.
   </dd>
  <dt><b><i>policyIdentifierHash</i></b> (propiedad compartida con XAdES y CAdES)</dt>
   <dd>
    Huella digital del documento de pol&iacute;tica de firma (normalmente del mismo fichero en formato ASN.1 procesable).
    Si no se indica una huella digital y el par&aacute;metro <code>policyIdentifier</code> no es una URL accesible
    universalmente se usar&aacute; <code>0</code>, mientras que si no se indica una huella digital pero el par&aacute;metro
    <code>policyIdentifier</code> es una URL accesible universalmente, se descargara el fichero apuntado por la URL para calcular la huella
    digital <i>al vuelo</i>.
   </dd>
  <dt><b><i>policyIdentifierHashAlgorithm</i></b> (propiedad compartida con XAdES y CAdES)</dt>
   <dd>
    Algoritmo usado para el c&aacute;lculo de la huella digital indicada en el par&aacute;metro <code>policyIdentifierHash</code>.
    Es obligatorio indicarlo cuando se proporciona una huella digital distinta de <code>0</code>.
   </dd>
  <dt><b><i>policyQualifier</i></b> (propiedad compartida con XAdES y CAdES)</dt>
   <dd>
    URL que apunta al documento descriptivo de la pol&iacute;tica de firma (normalmente un documento PDF con una descripci&oacute;n textual).
   </dd>
  <dt><b><i>ownerPassword</i></b></dt>
   <dd>
    Contrase&ntilde;a de apertura del PDF (contrase&ntilde;a del propietario) si este estaba cifrado.<br>
    No se soporta la firma de documentos PDF cifrados con certificados o con algoritmo AES256.
   </dd>
  <dt><b><i>headLess</i></b></dt>
   <dd>
    Evita cualquier interacci&oacute;n con el usuario si se establece a <code>true</code>, si no se establece o se establece a <code>false</code>
    act&uacute;a normalmente (puede mostrar di&aacute;logos, por ejemplo, para solicitar las contrase&ntilde;as de los PDF cifrados). &Uacute;til para
    los procesos desatendidos y por lotes.
   </dd>
  <dt><b><i>avoidEncryptingSignedPdfs</i></b></dt>
   <dd>
    Si se establece a <code>true</code> no cifra los PDF firmados aunque el original estuviese firmado, si no se establece o se establece a
    <code>false</code> los PDF se cifran tras firmarse si el original lo estaba, usando la misma contrase&ntilde;a y opciones que este.
   </dd>
  <dt><b><i>allowSigningCertifiedPdfs</i></b></dt>
   <dd>
    Si se establece a <code>true</code> permite la firma o cofirma de PDF certificados sin consultarlo al usuario, si se establece a
    <code>false</code> o cualquier otro valor se lanza una excepci&oacute;n en caso de intentar firmar o cofirmar un PDF certificado y
    si no se establece se mostrar&aacute; un di&aacute;logo al usuario para que confirme que desea realizar la firma a pesar de que
    el resultado ser&aacute;n una firma no v&aacute;lida.<br>
    <b>Si el par&aacute;metro <code>headLess</code> est&aacute; establecido a <code>true</code>, no podr&aacute; mostrar el di&aacute;logo
    de confirmaci&oacute;n as&iacute; que llegados a este punto se lanzar&aacute; una excepci&oacute;n.</b><br>
    No se soporta el cifrado de documentos PDF con certificados o con algoritmo AES256.
   </dd>
  <dt><b><i>tsType</i></b></dt>
   <dd>
    Tipo de sello de tiempo a aplicar:
    <ul>
	 <li>1 = Solo sello a nivel de firma.</li>
	 <li>2 = Solo sello a nivel de documento.</li>
	 <li>3 = Dos sellos, uno a nivel de firma y otro a nivel de documento.</li>
	</ul>
   </dd>
  <dt><b><i>tsaURL</i></b></dt>
   <dd>URL de la autoridad de sello de tiempo (si no se indica no se a&ntilde;ade sello de tiempo).</dd>
  <dt><b><i>tsaPolicy</i></b></dt>
   <dd>Pol&iacute;tica de sellado de tiempo.</dd>
  <dt><b><i>tsaHashAlgorithm</i></b></dt>
   <dd>Algoritmo de huella digital a usar para el sello de tiempo (si no se establece se usa SHA-1).</dd>
  <dt><b><i>tsaRequireCert</i></b></dt>
   <dd><code>true</code> si se requiere el certificado de la TSA, false en caso contrario (si no se establece se asume <code>true</code>).</dd>
  <dt><b><i>tsaUsr</i></b></dt>
   <dd>Nombre de usuario de la TSA.</dd>
  <dt><b><i>tsaPwd</i></b></dt>
   <dd>Contrase&ntilde;a del usuario de la TSA. Se ignora si no se ha establecido adem&aacute;s <code>tsaUsr</code>.</dd>
  <dt><b><i>tsaSslPkcs12File</i></b></dt>
   <dd>
    Nombre del fichero PKCS#12 que contiene el certificado SSL cliente que pedir&aacute; la TSA al establecer la 
    coneci&oacute;s HTTPS.
   </dd>
  <dt><b><i>tsaSslPkcs12FilePassword</i></b></dt>
   <dd>
    Contrase&ntilde;a del fichero PKCS#12 que contiene el certificado SSL cliente para las conexiones HTTPS.
   </dd>
   <dt><b><i>signingCertificateV2</i></b> (propiedad compartida con CAdES)</dt>
   <dd>Si se indica a <code>true</code> se utilizar&aacute; SigningCertificateV2, si se indica cualquier otra cosa SigningCertificateV1.
   Si no se indica nada, se utilizar&aacute; V1 para las firmas SHA1 y V2 para el resto.</dd>
 </dl>
 </body>
</html>